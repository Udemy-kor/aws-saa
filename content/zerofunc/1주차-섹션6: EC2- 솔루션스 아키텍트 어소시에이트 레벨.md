# 퍼블릭 vs 프라이빗 vs 탄력적 IP
**퍼블릭 IP**
- 퍼블릭 IP는 인터넷 상에서 식별될 수 있습니다.
- 전체 웹에서 유일한 것이어야 합니다.

**프라이빗 IP**
- 프라이빗 IP는 사설 네트워크 안에서만 식별될 수 있습니다.
- NAT 장치와 프록시 역할을 하는 인터넷 게이트웨이를 통해 인터넷에 연결됩니다.

**탄력적 IP**
- EC2 인스턴스를 시작하고 중지할 때 공용 IP를 변경할 수 있습니다.
- 삭제하지 않는 한 계속 보유할 수 있습니다.
- 계정당 최대 5개만 사용 가능합니다.
- 탄력적 IP를 사용하는 것은 추천되지 않습니다.
---
# EC2 배치 그룹

- EC2 인스턴스가 AWS 인프라에 배치되는 방식을 제어하고자 할 때 사용합니다.

세 가지 전략을 사용할 수 있습니다.

- **Cluster**
- **Spread**
- **Partition**
## Placement Groups Cluster
- EC2 인스턴스가 모두 동일한 가용 영역에 배치됩니다.
- 뛰어난 네트워크 성능을 제공합니다.
- 지연 시간이 짧고 처리량이 많은 네트워크를 확보할 수 있습니다.
- 단점:
  - AZ에 장애가 발생하면 모든 인스턴스가 동시에 장애를 일으킬 수 있습니다.
- **사용 사례**
  - 빅 데이터 작업이나 애플리케이션의 각 인스턴스 간에 지연 시간이 매우 짧고 처리량이 많은 네트워크가 필요한 애플리케이션.

## Placement Groups Spread
- 장애 위험을 최소화하려고 합니다.
- 모든 EC2 인스턴스가 다른 하드웨어에 위치하게 됩니다.
- 장점:
  - 여러 AZ에 걸쳐 배치되어 있어 동시 실패의 위험이 감소합니다.
- 단점:
  - 배치 그룹의 AZ당 7개의 인스턴스로 제한됩니다.
    - 크기가 적당하지만 너무 크지 않은 애플리케이션에서만 사용 가능합니다.
- **사용 사례**
  - 가용성을 극대화하고 위험을 줄여야 하는 애플리케이션.
  - 인스턴스 오류를 서로 격리해야 하는 크리티컬 애플리케이션.

## Placement Groups Partition
- 여러 가용 영역의 파티션에 인스턴스를 분산할 수 있습니다.
- AZ당 7개의 파티션이 있습니다.
- 파티션은 AWS의 랙을 나타냅니다.
- 파티션이 많으면 인스턴스가 여러 하드웨어 랙에 분산되어 서로 랙 장애로부터 안전합니다.
- 수백 개의 인스턴스를 사용할 수 있습니다.
- 하드웨어 물리적 랙을 공유하지 않으므로 각 파티션은 장애로부터 격리됩니다.
- **사용 사례**
  - 파티션들 전반에 걸쳐 데이터와 서버를 퍼뜨려 두도록 파티션 인식 가능한 애플리케이션에 사용합니다.
    - HDFS, HBase, Cassandra, Kafka

---

# Elastic Network Interfaces (ENI)

- ENI는 가상 네트워크 카드입니다.
- EC2 인스턴스가 네트워크에 액세스할 수 있게 해줍니다.
- ENI 구성 요소:
  - 기본 프라이빗 IPv4, 1개 이상의 보조 IPv4를 가집니다.
  - 1개의 Elastic IP (IPv4) per private IPv4.
  - 1개의 퍼블릭 IPv4.
  - 1개 이상의 보안 그룹.
  - MAC 주소.
- EC2 인스턴스와 독립적으로 ENI를 생성하고 즉시 연결하거나 장애 조치를 위해 EC2 인스턴스에서 이동시킬 수 있습니다.
- ENI는 특정 AZ에 바운드 됩니다.

---
# EC2 Hibernate
- **인스턴스 중지 혹은 종료**
  - **STOP**: EBS는 다시 시작할 때까지 그대로 유지됩니다.
  - **Terminate**: 루트 볼륨이 삭제되도록 설정했다면, 해당 볼륨은 삭제됩니다. 설정하지 않은 다른 볼륨은 인스턴스가 종료되더라도 남습니다.
- RAM에 있던 인메모리 상태는 그대로 보존됩니다.
  - 인스턴스 부팅이 더 빠릅니다.
  - OS가 완전히 중지되지 않고 멈춰 둡니다.
  - RAM에 기록된 인메모리 상태는 루트 경로의 EBS 볼륨에 기록되므로 루트 EBS 볼륨을 암호화해야 하며, 볼륨 용량은 RAM을 저장할 만큼 충분해야 합니다.
  - RAM의 내용은 EBS 볼륨에 덤프됩니다.
- **사용 사례**
  - 오래 실행되는 프로세스를 중지하지 않고 유지하고 싶을 때.
  - RAM 상태를 저장하고 싶을 때.
  - 빠르게 재부팅하고 싶을 때.

## 알아두면 좋은 사항

- 지원하는 인스턴스가 많습니다.
- RAM 크기는 최대 150GB입니다.
- Bare Metal 인스턴스에는 적용되지 않습니다.
- AMI: Amazon Linux 2, Linux AMI, Ubuntu, RHEL, CentOS, Windows 등.
- Root Volume: DBS에만 저장이 가능하며 암호화가 필요하고, 덤프된 RAM을 포함할 만큼 크기가 커야 합니다.
- 온디맨드, 예약 인스턴스, 스팟 인스턴스 모두 사용 가능합니다.
- 절전 모드는 최대 60일까지 사용 가능합니다.