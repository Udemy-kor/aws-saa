### 공용 IP (Public) vs 사설 IP (Private)

- 네트워크는 IPv4, IPv6로 나눠짐
- IPv4는 온라인에서 많이 쓰임, IPv6는 사물 인터넷에서 많이 쓰임
- 공용 IP는 서로의 공용 IP로 통신할 수 있다.
- 사설 네트워크는 사설 IP로 통신하는데 사설 IP는 범위가 존재한다.
- 사설 네트워크 내의 모든 컴퓨터들은 사설 IP로 통신한다.
- 공용 게이트웨이인 인터넷 게이트웨이를 쓴다면 사설 네트워크의 컴퓨터들도 다른 서버들과 통신 가능하다.
- **공용 IP가 있다면 모든 인터넷 통신 가능하고, 사설 IP로는 사설 네트워크 내에서만 액세스할 수 있다.**

- 공용 IP는 인터넷 상에서 유일해야 한다.
- 사설 IP는 오직 사설 네트워크 안에서만 유일하면 된다.
- 두 개의 사설 네트워크는 두 개의 똑같은 사설 IP가 있을 수 있다.
- 사설 IP가 외부로 통신하려면 인터넷 게이트웨이 같은 장치가 필요하다.
- **인스턴스의 고정 IP를 쓰려면 탄력적 IP가 필요하다.**
- 계정당 탄력적 IP는 5개까지 쓸 수 있다.
- 탄력적 IP는 사용하지 않는 게 권장된다.
- 대신 공용 IP를 써서 DNS 이름으로 통신하는 게 좋다. (Route53에서 가능)
- 나중에는 로드밸런서로 공용 IP를 아예 사용하지 않을 수도 있다.

- EC2 기기에 SSH를 할 땐 공용 IP만 사용 가능
- EC2를 껐다가 키면 IP가 변경될 수 있다.

### 배치 그룹 (Placement Groups)

- EC2 인스턴스가 AWS 인스턴스에 배치되는 전략을 설정
- 세 가지 전략이 존재
    - **클러스터 배치 그룹:** 단일 가용 영역 내에서 지연 시간이 짧은 하드웨어 설정으로 인스턴스를 그룹화
    - **분산 배치 그룹:** 인스턴스가 다른 하드웨어에 분산 (Critical Applcations)
    - **분할 배치 그룹:** 인스턴스를 분할하는 것과 유용하게 파티션을 분리함.

#### 클러스터 배치 그룹

- **모든 EC2 인스턴스가 같은 가용 영역**
- 모든 인스턴스 간에 초당 10Gb의 대역폭 확보
- 이 말은 즉 성능이 좋음
- 하지만 가용 영역에 장애 발생시 모든 EC2 인스턴스가 장애가 발생
- 빅데이터 작업 등 지연시간이 매우 짧아야 하는 작업

#### 분산 배치 그룹

- 실패 위험 최소화
- 모든 EC2 인스턴스가 각기 다른 하드웨어
- 장점은 여러 가용 영역에 걸쳐 있기에 동시 실패 위험이 적음
- 단점은 배치 그룹의 가용 영역당 7개의 인스턴스로 제한된다.
- 가용성을 극대화하고, 위험하지 않아야 하는 애플리케이션에서 사용
- **배치그룹 당 가용 영역의 인스턴스 수는 7개임을 기억**

#### 분할 배치 그룹

- 여러 가용 영역의 파티션에 인스턴스를 분리
- 가용 영역당 최대 7개의 파티션
- 각 파티션에는 EC2 인스턴스가 존재할 수 있음
- 각 파티션은 AWS의 랙인데, 파티션이 많으면 인스턴스가 랙 실패로부터 안전하다.
- 각 파티션을 실패로부터 격리된다. 즉 파티션 하나가 다운되더라도 다른 파티션은 정상

### Elastic Netword Interfaces (ENI)

- VPC의 논리적 구성 요소이자 가상 네트워크 카드
- ENI가 EC2 인스턴스에 접근하도록 해줌
- ENI는 주요 사설 IPv4와 보조 사설 IPv4를 가질 수 있다.
- EC2에 얼마든지 보조 IPv4를 추가 가능
- ENI에 하나 이상의 보안그룹 설정 가능